{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}

<h2>Predicted Class: {{ pred.label }}</h2>
<h3>From Model: {{ pred.ai_detection_method }}</h3>
<h3>Model positive ID probability: {{ pred.probability }}</h3>
<p>Source file: {{ pred.sample.filepath }}</p>
<p>Start time (s): {{ pred.sample.start_time_s }}</p>
<p>End time (s): {{ pred.sample.stop_time_s }}</p>

{% if pred.reviewed_by  %}
    <p>Last reviewed by {{ pred.reviewer.username }} on {{ pred.reviewed_on }}</p>
    <p>User confidence (0-100): {{ pred.review_confidence_score }}</p>
{% endif %}

<div>
    <img src="{{ url_for('main.plot_sample_spectrogram', sample_id=pred.sample.id) }}" class="image"/>
    <p></p>
    <audio controls>
        <source src="{{ url_for('static', filename='audio/sample_{}.wav'.format(pred.sample.id)) }}" type="audio/wav">
    </audio>

    <h2>Review</h2>
    <div class="row">
        <div class="col-md-4">
            {{ wtf.quick_form(form) }}
        </div>
    </div>

</div>

<h2>Reference Examples ({{ example_form.species.data }})</h2>
<div class="row">
    <div class="col-md-4">
        {{ wtf.quick_form(example_form) }}
    </div>
</div>

<table class="table table-hover">
    {% for item in examples %}
        <tr>
            <td>
                <img src="{{ url_for('main.plot_example_spectrogram', example_id=item.id) }}" class="image"/>
                <audio controls>
                    <source src="{{ url_for('static', filename='audio/example_{}.wav'.format(item.id)) }}" type="audio/wav">
                </audio>
                <p>Source file: {{ item.filepath }}</p>
            </td>
        </tr>
        {% endfor %}
</table>


{% endblock %}
